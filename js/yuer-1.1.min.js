$(function(){ 
	divHieght();
	window.onresize=function(){
		divHieght();
	}
	
	//一级菜单点击事件
	$(".yuer_first_menu").click(function(){
		//隐藏class为childDiv的子菜单
		$(".yuer_childDiv").slideUp();
		//alert($(this).next().attr("class"));
		var nextClass = $(this).next().attr("class");
		//判断下一个元素的class是否是childDiv  并显示指定菜单
		if (nextClass.indexOf("yuer_childDiv") >= 0) {
			if($(this).next().css("display") == "block"){
				$(this).next().slideUp();
			}else{
				$(this).next().css("background"," #4B5F7D");
				$(this).next().slideDown();
			}
		}
	});

	//功能菜单点击事件  使用class为.true_menu的元素为功能元素
	$(".true_menu").click(function(){
		$(".true_menu").removeClass("yuer_select_menu");
		$(this).addClass("yuer_select_menu");
		$("#yuer_body_iframe").attr("src",$(this).attr("frame_url"));
	});

	//关闭弹框
	$(".yuer_cancel").click(function(){
		$(this).parent().parent().yuerDialog("hide");
	});
	
	$(document).on("click",'.yuer_dialog_msg_bottom_div_a',function(){
		$(this).parent().parent().yuerMsgDialog("hide","","");
	});

	$(document).on("click",'.yuer_dialog_msg_bottom_div_sure_a',function(){
		$(this).parent().parent().parent().yuerMsgDialog("hide","","");
	});

	$(document).on("click",'.yuer_dialog_msg_bottom_div_cancel_a',function(){
		$(this).parent().parent().parent().yuerMsgDialog("hide","","");
	});

});
//自适应宽高
function divHieght(){
	$("#yuer_body_index").height(document.documentElement.clientHeight);
	$("#yuer_body_left").height(document.documentElement.clientHeight-60);
	$("#yuer_body_right").height(document.documentElement.clientHeight-90);

	$("#yuer_iframe_body_div").height(document.documentElement.clientHeight);
}


(function($) {
	//创建一个遮罩DIV
	var yuer_full_screen_div = document.createElement('div');
	yuer_full_screen_div.id = "yuer_full_screen_div";
	yuer_full_screen_div.style.cssText = "width:100%;height:100%;position:absolute;top:0px;background-color:#000;opacity:0.5;-moz-opacity:0.5;filter:alpha(opacity=50);z-index:1;";
	
 	//创建一个名为yuerDialog的弹框插件
	$.fn.yuerDialog = function(option) {
		if(option == "show"){
			//计算弹出层居左多少px可以使其居中显示
			var leftpx = (this.parent().width() - this.width()) / 2;
			this.css("display","block");
			this.css("left",leftpx + "px");

			var yuer_dialog_top_height = this.children(".yuer_dialog_top").height();
			var yuer_dialog_bottom_height = this.children(".yuer_dialog_bottom").height();
			var yuer_dialog_content_height = 0;
			if(yuer_dialog_top_height == "undefined" && yuer_dialog_bottom_height != "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_bottom_height);
			}else if(yuer_dialog_top_height != "undefined" && yuer_dialog_bottom_height == "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_top_height);
			}else if(yuer_dialog_top_height != "undefined" && yuer_dialog_bottom_height != "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_top_height - yuer_dialog_bottom_height);
			}else{
				yuer_dialog_content_height = this.height();
			}
			this.children(".yuer_dialog_content").height(yuer_dialog_content_height);
			
			this.children(".yuer_dialog_top").children(".yuer_dialog_top_msg").width(this.width()-80);
			this.after(yuer_full_screen_div);
		}else if(option == "hide"){
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
		}else{
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
		}
	}
	$.fn.yuerMsgDialog = function(option,type,msg){
		/**
		 * option : show(显示)、hide(隐藏) 默认隐藏
		 * type : error(错误提示)、info(一般提示)、confirm(确认提示) 默认一般提示
		 * msg : 提示信息
		 */
		if(option == "show"){
			var leftpx = (this.parent().width() - this.width()) / 2;
			this.css("display","block");
			this.css("left",leftpx + "px");
			
			var yuer_dialog_msg_top_div = document.createElement('div');
			yuer_dialog_msg_top_div.id = "yuer_dialog_msg_top_div";
			var yuer_dialog_msg_content_div = document.createElement('div');
			yuer_dialog_msg_content_div.id = "yuer_dialog_msg_content_div";
			var yuer_dialog_msg_bottom_div = document.createElement('div');
			yuer_dialog_msg_bottom_div.id = "yuer_dialog_msg_bottom_div";

			if(type == "error"){
				yuer_dialog_msg_top_div.style.cssText = "width:85%;height:40px;border-bottom:1px solid #E3E6EC;float:left;line-height:40px;border-radius:10px 10px 0px 0px;padding-left:15%;color:#BB0000; font-weight:bold;background-image:url('../images/error1.png');background-repeat:no-repeat;";
				yuer_dialog_msg_top_div.innerText = "错误信息";
				if(msg.length <= 10){
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #E3E6EC;float:left;line-height:58px;color:#BB0000;font-size:16px;text-align:center;";
					yuer_dialog_msg_content_div.innerText = msg;
				}else if(msg.length > 10 && msg.length <= 20){
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #E3E6EC;float:left;line-height:58px;color:#BB0000;font-size:14px;text-align:center;";
					yuer_dialog_msg_content_div.innerText = msg;
				}else{
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #E3E6EC;float:left;line-height:58px;color:#BB0000;font-size:16px;text-align:center;";
					yuer_dialog_msg_content_div.title = msg;
					yuer_dialog_msg_content_div.innerText = msg.substring(0,8) + "...";
				}
				yuer_dialog_msg_bottom_div.style.cssText = "width:100%;height:60px;line-height:50px;float:left;font-size:16px;text-align:center;"
				var yuer_dialog_msg_bottom_div_a = document.createElement("a");
				yuer_dialog_msg_bottom_div_a.id = "yuer_dialog_msg_bottom_div_a";
				yuer_dialog_msg_bottom_div_a.className = "yuer_dialog_msg_bottom_div_a";
				yuer_dialog_msg_bottom_div_a.href = "javascript:void(0)";
				yuer_dialog_msg_bottom_div_a.style.cssText = "text-decoration:none;color:#BB0000;";
				yuer_dialog_msg_bottom_div_a.innerText = "确 定";
				yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_a);
			}else{
				yuer_dialog_msg_top_div.style.cssText = "width:85%;height:40px;border-bottom:1px solid #45C8DC;float:left;line-height:40px;border-radius:10px 10px 0px 0px;padding-left:15%;color:#45C8DC; font-weight:bold;background-image:url('../images/info1.png');background-repeat:no-repeat;";
				yuer_dialog_msg_top_div.innerText = "提示信息";

				if(msg.length <= 10){
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #45C8DC;float:left;line-height:58px;color:#45C8DC;font-size:16px;text-align:center;";
					yuer_dialog_msg_content_div.innerText = msg;
				}else if(msg.length > 10 && msg.length <= 20){
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #45C8DC;float:left;line-height:58px;color:#45C8DC;font-size:14px;text-align:center;";
					yuer_dialog_msg_content_div.innerText = msg;
				}else{
					yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #45C8DC;float:left;line-height:58px;color:#45C8DC;font-size:16px;text-align:center;";
					yuer_dialog_msg_content_div.title = msg;
					yuer_dialog_msg_content_div.innerText = msg.substring(0,8) + "...";
				}
				yuer_dialog_msg_bottom_div.style.cssText = "width:100%;height:50px;line-height:50px;float:left;font-size:16px;text-align:center;"
				if(type == "confirm"){
					var yuer_dialog_msg_bottom_div_sure = document.createElement('div');
					yuer_dialog_msg_bottom_div_sure.id = "yuer_dialog_msg_bottom_div_sure";
					yuer_dialog_msg_bottom_div_sure.style.cssText = "width:49%;height:50px;line-height:50px;float:left;font-size:16px;text-align:center;border-right:1px solid #45C8DC;"
					var yuer_dialog_msg_bottom_div_sure_a = document.createElement("a");
					yuer_dialog_msg_bottom_div_sure_a.id = "yuer_dialog_msg_bottom_div_sure_a";
					yuer_dialog_msg_bottom_div_sure_a.className = "yuer_dialog_msg_bottom_div_sure_a";
					yuer_dialog_msg_bottom_div_sure_a.href = "javascript:void(0)";
					yuer_dialog_msg_bottom_div_sure_a.style.cssText = "text-decoration:none;color:#45C8DC;";
					yuer_dialog_msg_bottom_div_sure_a.innerText = "确 定";
					yuer_dialog_msg_bottom_div_sure.append(yuer_dialog_msg_bottom_div_sure_a);
					yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_sure);

					var yuer_dialog_msg_bottom_div_cancel = document.createElement('div');
					yuer_dialog_msg_bottom_div_cancel.id = "yuer_dialog_msg_bottom_div_cancel";
					yuer_dialog_msg_bottom_div_cancel.style.cssText = "width:49%;height:50px;line-height:50px;float:left;font-size:16px;text-align:center;"
					var yuer_dialog_msg_bottom_div_cancel_a = document.createElement("a");
					yuer_dialog_msg_bottom_div_cancel_a.id = "yuer_dialog_msg_bottom_div_cancel_a";
					yuer_dialog_msg_bottom_div_cancel_a.className = "yuer_dialog_msg_bottom_div_cancel_a";
					yuer_dialog_msg_bottom_div_cancel_a.href = "javascript:void(0)";
					yuer_dialog_msg_bottom_div_cancel_a.style.cssText = "text-decoration:none;color:#45C8DC;";
					yuer_dialog_msg_bottom_div_cancel_a.innerText = "取 消";
					yuer_dialog_msg_bottom_div_cancel.append(yuer_dialog_msg_bottom_div_cancel_a);
					yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_cancel);
				}else{
					var yuer_dialog_msg_bottom_div_a = document.createElement("a");
					yuer_dialog_msg_bottom_div_a.id = "yuer_dialog_msg_bottom_div_a";
					yuer_dialog_msg_bottom_div_a.className = "yuer_dialog_msg_bottom_div_a";
					yuer_dialog_msg_bottom_div_a.href = "javascript:void(0)";
					yuer_dialog_msg_bottom_div_a.style.cssText = "text-decoration:none;color:#45C8DC;";
					yuer_dialog_msg_bottom_div_a.innerText = "确 定";
					yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_a);
				}
			}
			this.append(yuer_dialog_msg_top_div);
			this.append(yuer_dialog_msg_content_div);
			this.append(yuer_dialog_msg_bottom_div);

			this.after(yuer_full_screen_div);
		}else if(option == "hide"){
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
			$("#yuer_dialog_msg_top_div").remove();
			$("#yuer_dialog_msg_content_div").remove();
			$("#yuer_dialog_msg_bottom_div").remove();
		}else{
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
			$("#yuer_dialog_msg_top_div").remove();
			$("#yuer_dialog_msg_content_div").remove();
			$("#yuer_dialog_msg_bottom_div").remove();
		}
		
	}

})(jQuery)
