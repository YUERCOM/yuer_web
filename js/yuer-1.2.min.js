$(function(){ 
	divHieght();
	window.onresize=function(){
		divHieght();
	}
	
	//一级菜单点击事件
	$(".yuer_first_menu").click(function(){
		//隐藏class为childDiv的子菜单
		$(".yuer_childDiv").slideUp();
		//alert($(this).next().attr("class"));
		var nextClass = $(this).next().attr("class");
		//判断下一个元素的class是否是childDiv  并显示指定菜单
		if (nextClass.indexOf("yuer_childDiv") >= 0) {
			if($(this).next().css("display") == "block"){
				$(this).next().slideUp();
			}else{
				$(this).next().css("background"," #4B5F7D");
				$(this).next().slideDown();
			}
		}
	});

	//功能菜单点击事件  使用class为.true_menu的元素为功能元素
	$(".true_menu").click(function(){
		$(".true_menu").removeClass("yuer_select_menu");
		$(this).addClass("yuer_select_menu");
		$("#yuer_body_iframe").attr("src",$(this).attr("frame_url"));
	});

	//关闭弹框
	$(".yuer_cancel").click(function(){
		$(this).parent().parent().dialogMsg("hide");
	});
	
	$(document).on("click",'.yuer_dialog_msg_bottom_div_a',function(){
		$(this).parent().parent().yuerMsgDialog("hide","","");
	});

});
//自适应宽高
function divHieght(){
	$("#yuer_body_index").height(document.documentElement.clientHeight);
	$("#yuer_body_left").height(document.documentElement.clientHeight-60);
	$("#yuer_body_right").height(document.documentElement.clientHeight-90);

	$("#yuer_iframe_body_div").height(document.documentElement.clientHeight);
}


(function($) {
	//创建一个遮罩DIV
	var yuer_full_screen_div = document.createElement('div');
	yuer_full_screen_div.id = "yuer_full_screen_div";
	yuer_full_screen_div.style.cssText = "width:100%;height:100%;position:absolute;top:0px;background-color:#000;opacity:0.5;-moz-opacity:0.5;filter:alpha(opacity=50);z-index:1;";
 	//创建一个名为yuerDialog的弹框插件
	$.fn.dialogMsg = function(option) {
		if(option == "show"){
			//计算弹出层居左多少px可以使其居中显示
			var leftpx = (this.parent().width() - this.width()) / 2;
			this.css("display","block");
			this.css("left",leftpx + "px");

			var yuer_dialog_top_height = this.children(".yuer_dialog_top").height();
			var yuer_dialog_bottom_height = this.children(".yuer_dialog_bottom").height();
			var yuer_dialog_content_height = 0;
			if(yuer_dialog_top_height == "undefined" && yuer_dialog_bottom_height != "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_bottom_height);
			}else if(yuer_dialog_top_height != "undefined" && yuer_dialog_bottom_height == "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_top_height);
			}else if(yuer_dialog_top_height != "undefined" && yuer_dialog_bottom_height != "undefined"){
				yuer_dialog_content_height = (this.height() - yuer_dialog_top_height - yuer_dialog_bottom_height);
			}else{
				yuer_dialog_content_height = this.height();
			}
			this.children(".yuer_dialog_content").height(yuer_dialog_content_height);
			
			this.children(".yuer_dialog_top").children(".yuer_dialog_top_msg").width(this.width()-80);
			this.after(yuer_full_screen_div);
		}else if(option == "hide"){
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
		}else{
			this.css("display","none");
			$("#yuer_full_screen_div").remove();
		}
	}
})(jQuery)
;(function($) {
	$.dialog = {
		error:function(msg){
			content_html("error",msg);
			btnOk();
		},
		info:function(msg){
			content_html("info",msg);
			btnOk();
		},
		confirm:function(msg,callback){
			content_html("confirm",msg);
			btnOk(callback);
			btnNo();
		}
	};
	var content_html = function(type,msg){
		var leftpx = ($("body").width() - 300) / 2;
		//创建一个遮罩DIV
		var yuer_full_screen_div = document.createElement("div");
		yuer_full_screen_div.id = "_yuer_full_screen_div";
		yuer_full_screen_div.style.cssText = "width:100%;height:100%;position:absolute;top:0px;background-color:#000;opacity:0.5;-moz-opacity:0.5;filter:alpha(opacity=50);z-index:1;";
	 	//创建dialog底层DIV
	 	var yuer_dialog_msg_div = document.createElement("div");
 		yuer_dialog_msg_div.id = "_yuer_dialog_msg_div";
 		yuer_dialog_msg_div.style.cssText = "max-width:300px;max-height:150px;min-width:300px;min-height:150px;background:#FFFFFF;z-index:1000;top:50px;position:absolute;border-radius: 10px;left:" + leftpx + "px;";
 		
 		//yuer_full_screen_div.append(yuer_dialog_msg_div);
	 	//创建dialog top层DIV
 		var yuer_dialog_msg_top_div = document.createElement('div');
		yuer_dialog_msg_top_div.id = "_yuer_dialog_msg_top_div";
		//创建dialog content层DIV
		var yuer_dialog_msg_content_div = document.createElement('div');
		yuer_dialog_msg_content_div.id = "_yuer_dialog_msg_content_div";
		//创建dialog bottom层DIV
		var yuer_dialog_msg_bottom_div = document.createElement('div');
		yuer_dialog_msg_bottom_div.id = "_yuer_dialog_msg_bottom_div";
	 	if(type == "error"){
	 		yuer_dialog_msg_top_div.style.cssText = "width:85%;height:40px;border-bottom:1px solid #E3E6EC;float:left;line-height:40px;border-radius:10px 10px 0px 0px;padding-left:15%;color:#BB0000; font-weight:bold;background-image:url('../images/error1.png');background-repeat:no-repeat;";
			yuer_dialog_msg_top_div.innerText = "错误信息";
			yuer_dialog_msg_div.append(yuer_dialog_msg_top_div);
			if(msg.length <= 15){
				yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #E3E6EC;float:left;line-height:58px;color:#BB0000;font-size:16px;text-align:center;";
				yuer_dialog_msg_content_div.innerText = msg;
			}else{
				yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #E3E6EC;float:left;line-height:58px;color:#BB0000;font-size:16px;text-align:center;";
				yuer_dialog_msg_content_div.title = msg;
				yuer_dialog_msg_content_div.innerText = msg.substring(0,15) + "......";
			}
			yuer_dialog_msg_div.append(yuer_dialog_msg_content_div);
			yuer_dialog_msg_bottom_div.style.cssText = "width:100%;height:60px;line-height:50px;float:left;font-size:16px;text-align:center;"
			var yuer_dialog_msg_bottom_div_a = document.createElement("a");
			yuer_dialog_msg_bottom_div_a.id = "yuer_dialog_msg_bottom_div_a";
			yuer_dialog_msg_bottom_div_a.className = "yuer_dialog_msg_bottom_div_a_sure";
			yuer_dialog_msg_bottom_div_a.href = "javascript:void(0)";
			yuer_dialog_msg_bottom_div_a.style.cssText = "text-decoration:none;color:#BB0000;";
			yuer_dialog_msg_bottom_div_a.innerText = "确 定";
			yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_a);
			yuer_dialog_msg_div.append(yuer_dialog_msg_bottom_div);
	 	}else{
	 		yuer_dialog_msg_top_div.style.cssText = "width:85%;height:40px;border-bottom:1px solid #45C8DC;float:left;line-height:40px;border-radius:10px 10px 0px 0px;padding-left:15%;color:#45C8DC; font-weight:bold;background-image:url('../images/info1.png');background-repeat:no-repeat;";
			yuer_dialog_msg_top_div.innerText = "提示信息";
			yuer_dialog_msg_div.append(yuer_dialog_msg_top_div);
			if(msg.length <= 15){
				yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #45C8DC;float:left;line-height:58px;color:#45C8DC;font-size:16px;text-align:center;";
				yuer_dialog_msg_content_div.innerText = msg;
			}else{
				yuer_dialog_msg_content_div.style.cssText = "width:100%;height:58px;border-bottom:1px solid #45C8DC;float:left;line-height:58px;color:#45C8DC;font-size:16px;text-align:center;";
				yuer_dialog_msg_content_div.title = msg;
				yuer_dialog_msg_content_div.innerText = msg.substring(0,15) + "......";
			}
			yuer_dialog_msg_div.append(yuer_dialog_msg_content_div);
	 		if(type == "info"){
				yuer_dialog_msg_bottom_div.style.cssText = "width:100%;height:60px;line-height:50px;float:left;font-size:16px;text-align:center;"
				var yuer_dialog_msg_bottom_div_a = document.createElement("a");
				yuer_dialog_msg_bottom_div_a.id = "yuer_dialog_msg_bottom_div_a";
				yuer_dialog_msg_bottom_div_a.className = "yuer_dialog_msg_bottom_div_a_sure";
				yuer_dialog_msg_bottom_div_a.href = "javascript:void(0)";
				yuer_dialog_msg_bottom_div_a.style.cssText = "text-decoration:none;color:#45C8DC;";
				yuer_dialog_msg_bottom_div_a.innerText = "确 定";
				yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_a);
				yuer_dialog_msg_div.append(yuer_dialog_msg_bottom_div);
	 		}else if(type == "confirm"){
	 			var yuer_dialog_msg_bottom_div_sure = document.createElement('div');
				yuer_dialog_msg_bottom_div_sure.id = "_yuer_dialog_msg_bottom_div_sure";
				yuer_dialog_msg_bottom_div_sure.style.cssText = "width:49%;height:50px;line-height:50px;float:left;font-size:16px;text-align:center;border-right:1px solid #45C8DC;"
				var yuer_dialog_msg_bottom_div_sure_a = document.createElement("a");
				yuer_dialog_msg_bottom_div_sure_a.id = "_yuer_dialog_msg_bottom_div_sure_a";
				yuer_dialog_msg_bottom_div_sure_a.className = "yuer_dialog_msg_bottom_div_a_sure";
				yuer_dialog_msg_bottom_div_sure_a.href = "javascript:void(0)";
				yuer_dialog_msg_bottom_div_sure_a.style.cssText = "text-decoration:none;color:#45C8DC;";
				yuer_dialog_msg_bottom_div_sure_a.innerText = "确 定";
				yuer_dialog_msg_bottom_div_sure.append(yuer_dialog_msg_bottom_div_sure_a);
				yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_sure);

				var yuer_dialog_msg_bottom_div_cancel = document.createElement('div');
				yuer_dialog_msg_bottom_div_cancel.id = "_yuer_dialog_msg_bottom_div_cancel";
				yuer_dialog_msg_bottom_div_cancel.style.cssText = "width:49%;height:50px;line-height:50px;float:left;font-size:16px;text-align:center;"
				var yuer_dialog_msg_bottom_div_cancel_a = document.createElement("a");
				yuer_dialog_msg_bottom_div_cancel_a.id = "_yuer_dialog_msg_bottom_div_cancel_a";
				yuer_dialog_msg_bottom_div_cancel_a.className = "yuer_dialog_msg_bottom_div_a_cancel";
				yuer_dialog_msg_bottom_div_cancel_a.href = "javascript:void(0)";
				yuer_dialog_msg_bottom_div_cancel_a.style.cssText = "text-decoration:none;color:#45C8DC;";
				yuer_dialog_msg_bottom_div_cancel_a.innerText = "取 消";
				yuer_dialog_msg_bottom_div_cancel.append(yuer_dialog_msg_bottom_div_cancel_a);
				yuer_dialog_msg_bottom_div.append(yuer_dialog_msg_bottom_div_cancel);
				yuer_dialog_msg_div.append(yuer_dialog_msg_bottom_div);
	 		}
	 	}
		$("body").append(yuer_dialog_msg_div);
		yuer_dialog_msg_div.after(yuer_full_screen_div);
	}
	var btnOk = function(callback){
		$(".yuer_dialog_msg_bottom_div_a_sure").click(function(){
			$("#_yuer_full_screen_div").remove();
			$("#_yuer_dialog_msg_div").remove();
			if (typeof(callback) == "function") {
				callback();
			}
		});
	}
	var btnNo = function(){
		$(".yuer_dialog_msg_bottom_div_a_cancel").click(function(){
			$("#_yuer_full_screen_div").remove();
			$("#_yuer_dialog_msg_div").remove();
		});
	}
})(jQuery)